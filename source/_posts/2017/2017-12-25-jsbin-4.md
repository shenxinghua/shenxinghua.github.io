---
title: jsbin 4.1ç‰ˆæœ¬çš„æœ¬åœ°æ­å»º
date: 2017-12-25
datestring: "20171225"
pageid: 1
categories: 
- å‰ç«¯
tags:
- node
- åœ¨çº¿ç¼–ç¨‹
photos: images/poster/106.jpg
summary: jsbinæ˜¯ä¸€ç§å¼€æ”¾æºç çš„ååŒWebå¼€å‘è°ƒè¯•å·¥å…·ï¼ˆhttp://jsbin.com/?html,outputï¼‰ã€‚å…¶ä¼˜ç‚¹æ˜¯å¯ä»¥å¿«é€Ÿçš„æä¾›å‰ç«¯éœ€è¦çš„å„ç§å¼€å‘ç¯å¢ƒï¼Œå¿«é€Ÿåœ°ç¼–è¾‘ä»£ç ï¼Œå¹¶å®æ—¶æ˜¾ç¤ºé¡µé¢æœ€ç»ˆçš„æ•ˆæœã€‚
---

jsbinæ˜¯ä¸€ç§å¼€æ”¾æºç çš„ååŒWebå¼€å‘è°ƒè¯•å·¥å…·ï¼ˆ[http://jsbin.com/?html,output](http://jsbin.com/?html,output)ï¼‰ã€‚å…¶ä¼˜ç‚¹æ˜¯å¯ä»¥å¿«é€Ÿçš„æä¾›å‰ç«¯éœ€è¦çš„å„ç§å¼€å‘ç¯å¢ƒï¼Œå¿«é€Ÿåœ°ç¼–è¾‘ä»£ç ï¼Œå¹¶å®æ—¶æ˜¾ç¤ºé¡µé¢æœ€ç»ˆçš„æ•ˆæœã€‚

![](790456-69ecfa4a782b87dd.png)

å…¶å®ç±»ä¼¼çš„åœ¨çº¿ä»£ç è¿è¡Œå·¥å…·æœ‰å¾ˆå¤šï¼Œæ¯”è¾ƒæœ‰åçš„æœ‰codepenã€runjsã€codeanywhereç­‰ç­‰ã€‚ä½†jsbinçš„ä¸€ä¸ªæ˜¾è‘—ç‰¹ç‚¹æ˜¯å¼€æºã€‚å¼€å‘è€…ä»¬å¯ä»¥åœ¨è‡ªå·±çš„çˆ±æœºä¸Šæ­å»ºä¸€å¥—è‡ªå·±çš„è¿è¡Œç¯å¢ƒã€‚è¿™ä¸ªåº”è¯¥æ˜¯ä¼—å¤šå‰ç«¯ç¨‹åºå‘˜å„¿æ—¶çš„æ¢¦æƒ³å§ï¼Œamosworkerï¼ˆæœ¬äººï¼‰ä¹Ÿä¸€æ ·ã€‚

è™½ç„¶åœ¨githubä¸Šæœ‰å¼€æºçš„ä»£ç å¯ä»¥ç›´æ¥æ‹·è´ï¼Œä¹Ÿæœ‰è¯´æ˜æ–‡æ¡£ï¼Œä½†æ­å»ºçš„è¿‡ç¨‹å¹¶ä¸æ˜¯ç‰¹åˆ«é£é¡ºçš„ã€‚åœ¨è§£å†³äº†é‡åˆ°çš„æ‰€æœ‰é—®é¢˜åï¼Œamosworkeræƒ³åœ¨æ­¤å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æ­å»ºçš„æ–¹æ³•ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰ç”¨ã€‚

## Git clone 
é¦–å…ˆéœ€è¦ä» https://github.com/jsbin/jsbin ä¸‹è½½åˆ°æºç ã€‚ä¹Ÿå¯ä»¥ç”¨npmæ¥ç›´æ¥å®‰è£…æºä»£ç ï¼Œä½†æœ¬äººè¯•äº†å‡ æ¬¡éƒ½ä¸èƒ½æˆåŠŸã€‚

![](790456-ebfd8dd7240d3f7b.png)

äºæ˜¯é‡‡ç”¨äº†git cloneçš„æ–¹æ³•ç›´æ¥å°†ä»£ç æ‹‰å–åˆ°æœ¬åœ°ã€‚

```shell
$ git clone https://github.com/jsbin/jsbin.git
```

![](790456-1dd7a5c9bd5a2896.png)

## å®‰è£…
æ‹‰å–å®Œæˆåï¼Œè¿è¡Œ
```shell
$ cd jsbin
$ npm install
```
è¿›è¡Œå®‰è£…ã€‚**ï¼ˆåœ¨æ­¤éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œnodeçš„ç‰ˆæœ¬éœ€è¦ä¸º7.xï¼‰**
å¦‚æœé‡åˆ°npmå®‰è£…ä¸æˆåŠŸï¼Œä½œè€…å»ºè®®ç”¨yarnæ¥å®‰è£…ã€‚
```shell
$ yarn insall
```
å®‰è£…æˆåŠŸåè¿«ä¸åŠå¾…çš„è¿è¡Œ
```shell
$ bin/jsbin
```
å‘ç°ç›´æ¥æŠ¥é”™

![](790456-72add741f393ab70.png)

é€šè¿‡æŠ¥é”™ä¿¡æ¯å¯çŸ¥æ˜¯æ•°æ®åº“æ²¡æœ‰é…ç½®ã€‚åœ¨æ­¤amosworkeré€‰æ‹©äº†mysqlæ•°æ®åº“ï¼Œå¹¶å®‰è£…äº†mysql workerbenchæ–¹ä¾¿æ“ä½œæ•°æ®åº“ã€‚å°†config.default.jsonå¤åˆ¶ä¸€ä»½ä¿å­˜ä¸ºconfig.local.jsonï¼Œ ä¿®æ”¹
config.local.jsonæ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®ã€‚

```js
{
...
 "store": {
     "adapter": "mysql",
     "sqlite": {
       "location": "jsbin.sqlite"
     },
     "mysql": {
       "host": "localhost",
       "user": "root",
       "password": "your password",
       "database": "jsbin",
       "charset": "utf8",
       "collate": "uutf8_unicode_ci"
     }
   }
...
 }
```
æ¥ä¸‹æ¥å°±æ˜¯è¦åˆ›å»ºjsbinçš„æ•°æ®åº“äº†ã€‚
å…ˆå»ºç«‹æ•°æ®åº“

```shell
create database jsbin;
use jsbin;
```
åœ¨buildæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°ä¸€ä¸ªfull-db-v3.mysql.sqlçš„æ–‡ä»¶ï¼Œå¤åˆ¶é‡Œé¢çš„sqlè¯­å¥ï¼Œåœ¨workerbenché‡Œæ‰§è¡Œã€‚ç„¶åå¯åŠ¨æ•°æ®åº“ã€‚è¿è¡Œbin/json å‘½ä»¤å°±å¯ä»¥å¯åŠ¨jsbinçš„æœåŠ¡äº†ã€‚

## æ³¨å†Œæœ¬åœ°ç”¨æˆ·

éšæ„è¾“å…¥ç”¨æˆ·åã€é‚®ç®±å’Œå¯†ç å°±å¯ä»¥å®Œæˆæ³¨å†Œï¼Œä¸ç”¨è¿›è¡Œé‚®ç®±ç¡®è®¤

![](790456-f557210c683ee413.jpg)

æœ‰äº†ç”¨æˆ·åæˆ‘ä»¬å°±å¯ä»¥ä¿å­˜æˆ‘ä»¬çš„åŠ³åŠ¨æˆæœäº†O(âˆ©_âˆ©)Oå“ˆå“ˆ~


## è§£å†³outputæ— æ³•è¿è¡Œçš„é—®é¢˜
åœ¨htmlä¸­è¾“å…¥ä»£ç åï¼Œå‘ç°åœ¨å³ä¾§çš„outputï¼Œæ²¡æœ‰ä»»ä½•ååº”ã€‚æ‰“å¼€æ§åˆ¶å°åï¼Œå‘ç°outputé‡Œæœ‰ä¸€è¿ä¸²çš„404æŠ¥é”™ã€‚

![](790456-deadac25662864c7.png)

ç©¶å…¶åŸå› æ˜¯å› ä¸ºoutputçš„iframeä¸­åŠ è½½çš„jsç­‰é™æ€èµ„æºæ˜¯httpsåè®®çš„ã€‚ä½†jsbinç°åœ¨æä¾›çš„æ˜¯httpçš„æœåŠ¡ï¼Œæ‰€ä»¥å¾—æŠŠè·¯å¾„éƒ½æ”¹æˆä»¥httpå¼€å¤´ã€‚åœ¨lib/routes.jsæ–‡ä»¶ä¸­ å°† static: sandbox.helpers.urlForStatic(undefined, true) é‡Œçš„trueæ”¹æˆfalseã€‚

```js
app.get('/runner', function(req, res) {
    req.session.open = !!req.query.pro;
    res.render('runner', {
      scripts: res.app.locals.is_production ? false : scripts.runner,
      //static: sandbox.helpers.urlForStatic(undefined, true),
      static: sandbox.helpers.urlForStatic(undefined, false)//by amosworker
    });
});
```

å¦å¤–ï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªè·¯å¾„æ˜¯â€œ*/blog/all.jsonâ€ çš„404æŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥å»ºä¸€ä¸ªpublic/blog/all.jsonçš„ç©ºæ–‡ä»¶æ¥è§£å†³ï¼Œæˆ–è€…å°†public/js/chrome/welcome-panel.jsé‡Œçš„å…³äºall.jsonçš„ajaxè¯·æ±‚æ³¨é‡Šæ‰ã€‚

åˆ°è¿™é‡Œï¼Œæœ¬åœ°çš„jsbinç»ˆäºå¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚O(âˆ©_âˆ©)Oå“ˆå“ˆ~  
ä»Šå¤©æ˜¯åœ£è¯èŠ‚ï¼Œç¥å¤§å®¶åœ£è¯å¿«ä¹ï¼ Merry Christmasï¼ğŸ„